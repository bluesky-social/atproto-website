export const metadata = {
title: 'プロトコルの概要',
description:
'AT プロトコルの概要。',
}

# プロトコルの概要

**認証転送プロトコル** (別名 **atproto**) は、大規模な分散型ソーシャル アプリケーション用のフェデレーション プロトコルです。このドキュメントでは、AT プロトコルの背後にある考え方を紹介します。

## アイデンティティ

ユーザーは、AT プロトコル上のドメイン名で識別されます。これらのドメインは、ユーザーのアカウントとそのデータを保護する暗号化 URL にマップされます。

## データ リポジトリ

ユーザー データは、[署名済みデータ リポジトリ](/guides/data-repos) で交換されます。これらのリポジトリは、投稿、コメント、いいね、フォロー、メディア BLOB などを含むレコードのコレクションです。

## フェデレーション

AT プロトコルは、フェデレーション ネットワーク モデルでリポジトリを同期します。フェデレーションは、ネットワークが使いやすく、確実に利用できるようにするために選択されました。リポジトリ データは、標準の Web テクノロジー ([HTTP](/specs/xrpc) および [WebSocket](/specs/event-stream)) を介してサーバー間で同期されます。

ネットワークの 3 つのコア サービスは、パーソナル データ サーバー (PDS)、リレー、およびアプリ ビューです。フィード ジェネレーターとラベラーにも取り組んでいます。

さまざまな方法でスタックできる下位レベルのプリミティブは、リポジトリ、レキシコン、および DID です。フェデレーション アーキテクチャに関する技術的な決定の概要を [ブログ](https://bsky.social/about/blog/5-5-2023-federation-architecture) で公開しました。

## 相互運用

[Lexicon](/specs/lexicon) と呼ばれるグローバル スキーマ ネットワークは、サーバー間での呼び出しの名前と動作を統一するために使用されます。サーバーは、ユーザー リポジトリを同期するためのコア `com.atproto.*` レキシコンや、基本的なソーシャル動作を提供する `app.bsky.*` レキシコンなどの機能セットをサポートするために「レキシコン」を実装します。

Web がドキュメントを交換する一方で、AT プロトコルは図式情報とセマンティック情報を交換し、異なる組織のソフトウェアが互いのデータを理解できるようにします。これにより、atproto クライアントはサーバーから独立してユーザー インターフェイスを自由に作成でき、コンテンツを閲覧する際にレンダリング コード (HTML/JS/CSS) を交換する必要がなくなります。

## スケールの実現

個人データ サーバーは、クラウド内のホームです。データをホストし、配布し、ID を管理し、他のサービスへのリクエストを調整してビューを提供します。

リレーは、大規模なメトリック (いいね、再投稿、フォロワー) の取得、コンテンツの検出 (アルゴリズム)、ユーザー検索など、すべてのイベントを処理します。

この区別は、スケールと高度なユーザー選択を実現することを目的としています。

## アルゴリズムの選択

Web 検索エンジンと同様に、ユーザーはアグリゲータを自由に選択できます。フィード、アプリ ビュー、検索インデックスは独立したサードパーティによって提供され、リクエストはユーザー構成に基づいて PDS によってルーティングされます。

## アカウントの移植性

個人データ サーバーは、完全にオフラインになるか、特定のユーザーに対するサービスが停止するかのいずれかによって、いつでも失敗する可能性があると想定しています。AT プロトコルの目的は、ユーザーがサーバーの関与なしに自分のアカウントを新しい PDS に移行できるようにすることです。

ユーザー データは [署名済みデータ リポジトリ](/guides/data-repos) に保存され、[DID](/guides/identity) によって検証されます。署名済みデータ リポジトリは Git リポジトリに似ていますが、データベース レコード用です。DID は基本的にユーザー証明書のレジストリであり、いくつかの点で TLS 証明書システムに似ています。これらは、安全で信頼性が高く、ユーザーの PDS から独立していることが期待されています。

各 DID ドキュメントは、署名キーと回復キーの 2 つの公開キーを公開します。

* **署名キー**: DID ドキュメントとユーザーのデータ リポジトリへの変更をアサートします。

* **回復キー**: DID ドキュメントへの変更をアサートします。72 時間以内に署名キーを上書きできます。

署名キーは PDS に委託され、ユーザーのデータを管理できるようにしますが、回復キーはユーザーが保存します (紙のキーなど)。これにより、ユーザーは元のホストの助けを借りずにアカウントを新しい PDS に更新できます。

ユーザーのデータのバックアップは、バックアップとしてクライアントに永続的に同期されます (使用可能なディスク領域によって異なります)。PDS が予告なく消えた場合、ユーザーは DID ドキュメントを更新してバックアップをアップロードすることで、新しいプロバイダーに移行できる必要があります。

## スピーチ、リーチ、モデレーション

Atproto のモデルでは、_スピーチ_ と _リーチ_ は 2 つの別々のレイヤーとして構築され、互いに連携するように構築されます。「スピーチ」レイヤーは、権限を分散し、誰もが発言権を持つように設計されている必要があります。「リーチ」レイヤーは、その上にあり、柔軟性と拡張性を考慮して構築されています。

atproto の基本レイヤー (個人データ リポジトリとフェデレーション ネットワーク) は、誰もが自由に参加できるスピーチのための共通スペースを作成します。これは、誰でも Web サイトを作成できる Web に似ています。次に、インデックス サービスがネットワークからコンテンツを集約してリーチを有効にします。これは、検索エンジンに似ています。

## 仕様

主要な仕様の一部は次のとおりです。AT プロトコルの初期バージョンには次のものが含まれています:

- [認証転送プロトコル](/specs/atp)
- [DID](/specs/did) と [ハンドル](/specs/handle)
- [リポジトリ](/specs/repository) と [データ モデル](/specs/data-model)
- [用語集](/specs/lexicon)
- [HTTP API (XRPC)](/specs/xrpc) と [イベント ストリーム](/specs/event-stream)

ここから、[ガイドと仕様](/) を読み進めることができます。