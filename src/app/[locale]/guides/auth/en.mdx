import {Container} from "@/components/Container"

export const header = {
  title: 'Auth',
  description: 'Auth for Atproto application developers',
}

## Logging in

Auth is the first part of our docs for a reason! You don't need to log in to read data, but if you're looking to write it, you'll need a user session.

The simple way is with a password, [which you can read more about here](/guides/sdk-auth).

<TabGroup defaultValue="ts">
  <TabList>
    <Tab value="ts">TypeScript</Tab>
    <Tab value="go">Go</Tab>
  </TabList>
  <TabPanels>
    <TabPanel value="ts">
    ```tsx
    import { Client } from '@atproto/lex'
    import { PasswordAgent } from '@atproto/lex-password-agent'

    const result = await PasswordAgent.login({
      service: 'https://bsky.social', // or your PDS host
      identifier: 'your-handle.bsky.social',
      password: 'your-app-password',
    })
    const client = new Client(result.value)
    ```
    </TabPanel>
    <TabPanel value="go">
      TODO
    </TabPanel>
  </TabPanels>
</TabGroup>

We don't recommend this! Password auth is fine for bots and command line tools, but you don't want to handle a user's password.

Instead, you want to use OAuth:

<TabGroup defaultValue="ts">
  <TabList>
    <Tab value="ts">TypeScript</Tab>
    <Tab value="go">Go</Tab>
  </TabList>
  <TabPanels>
    <TabPanel value="ts">
    ```tsx
    import { Client } from '@atproto/lex'
    import {
      NodeOAuthClient,
      buildAtprotoLoopbackClientMetadata,
    } from "@atproto/oauth-client-node";

    const oauthClient = new NodeOAuthClient({
      clientMetadata: buildAtprotoLoopbackClientMetadata({
        scope: "atproto",
        redirect_uris: ["http://127.0.0.1:3000/oauth/callback"],
      }),
      stateStore,
      sessionStore,
    });
    const session = await oauthClient.restore(did)
    const client = new Client(session)
    ```
    </TabPanel>
    <TabPanel value="go">
      TODO
    </TabPanel>
  </TabPanels>
</TabGroup>

There's a bit more to it than that code, but you get the idea.

If you're building on NextJS, you can [read our full tutorial on OAuth here](/guides/oauth-tutorial). If you're in Expo, NodeJS, Electron, the Web, or Golang, you can [find the code you need in OAuth patterns](/guides/oauth-patterns).

## About authorization

This section is aimed at developers building applications on Atproto. Applications with their own end-user login flow should implement [OAuth](#what-is-oauth) for authentication. Single-purpose applications such as bots or command line tools may use [password authentication](/guides/sdk-auth) instead.

<Note>
We also support the use of [App Passwords](/specs/xrpc#app-passwords). Accounts can create and revoke app passwords separate from their primary password. This way, you do not need to supply your primary password to applications that use password auth.
</Note>

To implement OAuth in your application, refer to [OAuth patterns](/guides/oauth-patterns) for common use cases, and the [Scopes](/guides/scopes) guide for understanding permission models. If you're building your own protocol implementation or OAuth Client SDK, refer to the [OAuth spec](/specs/oauth).

## What *is* OAuth?

OAuth is an authorization framework that lets developers request access to an account without requiring users to hand over their password. Without OAuth, if someone wanted to authorize a 3rd party app to access their account, their only option would be to type their username and password into that app. This is bad for all sorts of reasons, the first being that a 3rd party app gets to see, and likely save, passwords. And once an app has a username and password, the app would have _full_ access to their account.

OAuth aims to solve these problems with a family of open specifications for managing secure authorization without requiring a person's username and password. If you've ever used a "Sign in with..." button or link on the web, you've used OAuth.

As a developer, you can request limited access to a person's account, meaning if you only need to post a message to someone's public timeline, you don't also need to request access to read their private messages. This is great for your app because you don't have to worry about managing data you don't need, and it's great for the person using your app because they don't need to worry about their DMs being compromised.

## How is OAuth Different in AT Protocol?

Atproto [specifies](/specs/oauth) a particular "profile" of the OAuth standards, using [OAuth 2.1](https://www.ietf.org/archive/id/draft-ietf-oauth-v2-1-13.html) as the foundation.

There are a few details that might catch you off guard if you're used to using other OAuth systems.

- **Atproto is distributed**: Usually, when an app has a "sign in with..." button, it provides a choice of which authorities it allows to authenticate users (usually one of a few big corporations). With ATProto OAuth, the app has no prior relationship with the authentication provider: a user's [PDS](/guides/the-at-stack#pds). This is also the reason why Atproto OAuth is not compatible with OIDC, which requires a pre-established relationship.

- **Migration**: Atproto users can migrate their accounts between servers ([PDSes](/guides/glossary#pds-personal-data-server)) over time. To facilitate this Atproto has a flexible [Identity](/guides/identity) layer, which allows usernames ([handles](/specs/handle)) to be resolved to a static user ID ([DID](/specs/did)), which in turn can be resolved to locate the user's PDS. When a user logs in to an app, the OAuth client dynamically resolves these relationships.

- **Client IDs**: In other OAuth ecosystems, it is often necessary for client apps to pre-register themselves with the resource server. This is not viable in a decentralized system (with many clients and many resource servers), so Atproto addresses this using [Client ID Metadata Documents](/specs/oauth#client-id-metadata-document).

## Further Reading and Resources

Begin by reading [SDK authentication](/guides/sdk-auth). To implement OAuth in your application, refer to [OAuth patterns](/guides/oauth-patterns) for common use cases, and the [Scopes](/guides/scopes) guide for understanding permission models.

- [SDK authentication](/guides/sdk-auth)
- [OAuth patterns](/guides/oauth-patterns)
- [Scopes](/guides/scopes)
- [Permission requests](/guides/permission-sets)
- [OAuth spec](/specs/oauth)
- [Permissions spec](/specs/permission)