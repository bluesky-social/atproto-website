export const header = {
  title: 'Reading Data',
  description: 'Read AT Protocol Records',
}

## Listing Records

<TabGroup defaultValue="ts">
  <TabList>
    <Tab value="ts">TypeScript</Tab>
    <Tab value="go">Go</Tab>
  </TabList>
  <TabPanels>
    <TabPanel value="ts">
    You can read records from a user's data repository with `client.list()`:

    ```tsx
    const posts = await client.list(app.bsky.feed.post, {
      limit: 10,
      repo: 'alex.bsky.team',
    })
    ```

    Each Lexicon will have its own parameters; for `app.bsky.feed.post`, you can specify the `repo` (a user's handle or [DID](#did-resolution)) and a `limit` on the number of posts to return. 
    </TabPanel>
    <TabPanel value="go">
    You can read posts from a user's data repository with `RepoListRecords()`:

    ```go
    resp, _ := comatproto.RepoListRecords(ctx, client,
        "app.bsky.feed.post",  // lexicon
        "",                    // cursor
        10,                    // limit
        "alex.bsky.team",      // handle or DID
        false,                 // reverse
    )

    for _, record := range resp.Records {
        fmt.Printf("Record: %s\n", record.Uri)
    }
    ```
    </TabPanel>
  </TabPanels>
</TabGroup>

Refer to [`app.bsky.feed.post`](https://docs.bsky.app/docs/api/app-bsky-feed-get-posts) for this complete Lexicon.

## Getting Records

<TabGroup defaultValue="ts">
  <TabList>
    <Tab value="ts">TypeScript</Tab>
    <Tab value="go">Go</Tab>
  </TabList>
  <TabPanels>
    <TabPanel value="ts">
    You can use `client.get()` to read an individual record by its [`rkey`](/specs/record-key):

    ```tsx
    const post = await client.get(app.bsky.feed.post, {
      rkey: '3jxf7z2k3q2',
    })
    ```
    </TabPanel>
    <TabPanel value="go">
    You can use `RepoGetRecord()` to read an individual record by its [`rkey`](/specs/record-key):
    
  ```go
  resp, _ := comatproto.RepoGetRecord(ctx, client, 
      "",                    // cid (empty for latest)
      "app.bsky.feed.post",  // lexicon
      "alex.bsky.team",      // handle or DID
      "3mbl5xdw4yk2r",       // rkey
  )

  fmt.Printf("URI: %s\n", resp.Uri)
  // resp.Value contains the record data
  ```
    </TabPanel>
  </TabPanels>
</TabGroup>


## DID Resolution

In AT, user data is resolved through [DIDs](/guides/sync#data-repositories), also known as [Decentralized Identifiers](https://en.wikipedia.org/wiki/Decentralized_identifier). Most AT Protocol applications use [`did:plc` DIDs](/guides/the-at-stack#did-plc) when registering user accounts.

You can resolve a known username to a DID using the `com.atproto.identity.resolveHandle` endpoint. This means that you can just visit this address in a browser with a `handle=` arugment to look up your DID:

```
https://bsky.social/xrpc/com.atproto.identity.resolveHandle?handle=youraccount.bsky.social
```

```
{
did: "did:plc:3vekukmab2djjeengw2o3wln"
}
```

The Typescript SDK also provides the DID of the currently-authenticated as `client.did`:

```tsx
const your_did = client.did
```

## Unauthenticated Reads

Some API endpoints can be accessed without authentication. You can create an unauthenticated client by passing a public API URL to a new `Client`:

<TabGroup defaultValue="ts">
  <TabList>
    <Tab value="ts">TypeScript</Tab>
    <Tab value="go">Go</Tab>
  </TabList>
  <TabPanels>
    <TabPanel value="ts">
    ```tsx
    import { Client } from '@atproto/lex'
    import * as app from './lexicons/app.js'

    const client = new Client('https://public.api.bsky.app')
    ```

    As with an authenticated client, you can `.get()` any public records, like a user's profile:

    ```tsx
    const profile = await client.get(app.bsky.actor.profile)
    ```

    You can make API calls to any Lexicon using the same SDK client pattern. For more examples, refer to [the SDK documentation](https://www.npmjs.com/package/@atproto/lex).
    </TabPanel>
    <TabPanel value="go">
```go
import (
	"context"
	appbsky "github.com/bluesky-social/indigo/api/bsky"
	"github.com/bluesky-social/indigo/xrpc"
)

ctx := context.Background()

client := &xrpc.Client{
  Host: "https://public.api.bsky.app", // public API endpoint
}
```

    As with an authenticated client, you can `.get()` any public records, like a user's profile:

    ```go
profile, _ := appbsky.ActorGetProfile(ctx, client, "alex.bsky.team")

fmt.Printf("Handle: %s\n", profile.Handle)
fmt.Printf("Display Name: %s\n", *profile.DisplayName)
fmt.Printf("Followers: %d\n", *profile.FollowersCount)
    ```

    You can make API calls to any Lexicon using the same SDK client pattern. For more examples, refer to [the Go SDK libraries](https://pkg.go.dev/github.com/bluesky-social/indigo).
    </TabPanel>
  </TabPanels>
</TabGroup>

Next, you might try [writing](/guides/writing-data) to a user's data repository.

## Further Reading and Resources

- [Reads and Writes](/guides/reads-and-writes)
- [Writing data](/guides/writing-data)
- [Accounts and deletions](/guides/account-lifecycle)
- [Social graph](/guides/social-graph)
- [Record Key spec](/specs/record-key)
- [URI scheme](/specs/at-uri-scheme)