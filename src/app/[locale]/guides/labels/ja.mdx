import {Container} from "@/components/Container"
import {Heading} from "@/components/Heading"

export const header = {
  title: 'ラベル',
  description: 'モデレーションラベルに関する全て',
}

<Heading level={2} id="about-labels">ラベルとは</Heading>

Atprotoのモデレーションは、以下を含む複数のスタッカブルなシステムで構成されています。

1. APIからコンテンツをフィルタリングする公開停止措置（takedown）
2. モデレーションサービスによってコンテンツに紐付けられるラベル
3. ミュートやブロックなどのユーザーコントロール

クライアントアプリケーションを構築する開発者は、ラベルとユーザーコントロールの適用方法を理解する必要があります。

**ラベル**は、ATエコシステム内のアカウントまたはコンテンツに関するメタデータ形式です。ラベルは*モデレーションサービス*によって公開され、アプリケーションにハードコードされているか、ユーザーによって選択されます。これらはレスポンスの`labels`フィールドでレコードに付与されます。

ラベルは以下の情報と共に公開されます。

```markdown
{
  /** このラベルを作成したアクターのDID */
  src: string
  /** このラベルが適用されるレコード、リポジトリ（アカウント）、またはその他のリソースのAT URI */
  uri: string
  /** オプション：このラベルが適用される'uri'リソースのバージョンを指定するCID */
  cid?: string
  /** このラベルの値または種類を表す短い文字列名 */
  val: string
  /** trueの場合、これは以前のラベルを取り消す否定ラベル */
  neg?: boolean
  /** このラベルが作成されたときのタイムスタンプ */
  cts: string
}

```

<Heading level={2} id="label-values">ラベル値</Heading>

ラベルの*値*はその動作を決定します。ラベル値の例としては、`porn`、`gore`、`spam`があります。

ラベル値は文字列です。現在、小文字のa-zまたはダッシュ文字のみ（`^[a-z-]+$`）である必要があります。`!`で始まるものもいくつかありますが、グローバルラベル値でのみ使用できます。

ラベル値はその定義によって解釈されます。定義には以下の属性が含まれます。

- `blurs`属性は`content`、`media`、または`none`になりえます
- `severity`属性は`alert`、`inform`、または`none`になりえます
- `defaultSetting`属性は`hide`、`warn`、または`ignore`になりえます
- `adultOnly`属性はブール値です

他にも定義属性がありますが、グローバルラベル値にのみ使用されます。

<Heading level={2} id="global-label-values">グローバルラベル値</Heading>

プロトコルで定義されているいくつかのラベル値があります。

- `!hide`は除去できない汎用警告をコンテンツにつけ、一覧からコンテンツをフィルタリングします。ユーザー設定の影響を受けません。
- `!warn`はコンテンツに汎用警告をつけますが、クリックでコンテンツを表示させることができます。ユーザー設定の影響を受けません。
- `!no-unauthenticated`はラベルを尊重するアプリケーションにおいて、ログインしていない利用者からコンテンツをアクセス不可にします。
- `porn`は画像に警告を置き、ユーザーが18歳以上かつアダルトコンテンツを有効にしている場合にのみクリックできます。
- `sexual`は`porn`と同じ挙動ですが、それほど過激ではない性的コンテンツに使われることを目的としています。
- `graphic-media`は`porn`と同じ挙動ですが、暴力/流血のためのものです。
- `nudity`は画像に警告を置きますが、18歳以上専用ではなく、デフォルトでは無視されます。

グローバルラベル値が存在する理由は2つあります。

1番目の理由は、グローバルに定義されているラベル値のみがセルフラベルとして使用できる（つまり、ラベラーではないユーザーによって設定される）からです。porn、sexual、gore、nudity、および!no-unauthenticatedラベルはこの理由でグローバルになっています。

2番目の理由は、「設定不可能」や「非ログインユーザーにのみ適用」などの特別な動作をカスタムラベルには規定できないからです。!hide、!warn、および!no-unauthenticatedラベルはこの理由でグローバルになっています。

<Heading level={2} id="custom-label-values">カスタムラベル値</Heading>

ラベラーは独自のラベル値を定義できます。すべてのラベラーは固有のラベル値定義の名前空間を持ちます。カスタム定義は、定義したラベラーにおけるすべてのグローバルラベルの定義を上書きできます。ただし、`!`で始まるものは予約されており、上書きできません。

2つの挙動属性（`blurs`と`severity`）があり、それぞれ3つの値を持っているため、カスタムラベル値には9つパターンの挙動があります。

| **blurs** | **severity** | **説明** |
| --- | --- | --- |
| `content` | `alert` | コンテンツを非表示にして、表示時に「危険」警告ラベルをコンテンツに置きます |
| `content` | `inform` | コンテンツを非表示にして、表示時に「中立」情報ラベルをコンテンツに置きます |
| `content` | `none` | コンテンツを非表示にします |
| `media` | `alert` | コンテンツ内の画像を非表示にして、表示時に「危険」警告ラベルをコンテンツに置きます |
| `media` | `inform` | コンテンツ内の画像を非表示にして、表示時に「中立」情報ラベルをコンテンツに置きます |
| `media` | `none` | コンテンツ内の画像を非表示にします |
| `none` | `alert` | 「危険」警告ラベルをコンテンツに置きます |
| `none` | `inform` | 「中立」情報ラベルをコンテンツに置きます |
| `none` | `none` | 視覚的効果なし |

使うかもしれないラベルの定義例

- ハラスメント：`blurs=content` + `severity=alert`
- 蜘蛛注意：`blurs=media` + `severity=alert`
- 誤情報：`blurs=none` + `severity=alert`
- 認証済ユーザー：`blurs=none` + `severity=inform`
- キュレーション優先度低：`blurs=none` + `severity=none`

`defaultSetting`は、ユーザーが最初にラベラーを登録するときにラベルがどのように設定されるかを規定します。

`adultOnly`は、アダルトコンテンツが無効の場合、ラベルを設定可能にするべきかを規定します。

<Heading level={2} id="label-configurations">ラベル設定</Heading>

ユーザーは、ラベラーからの各ラベルを非表示（hide）、警告（warn）、または無視（ignore）することを選択できます。非表示と警告は基本的に似ていますが、非表示はラベル付きコンテンツをフィードや一覧表示からフィルタリングします。無視はラベルを無視するだけです。環境設定でアダルトコンテンツが有効になっていない場合、挙動は上書き不可で非表示を強制する必要があります。

詳細については、[ラベル](/specs/label)仕様を参照してください。

<Heading level={2} id="further-reading-and-resources">関連・参考資料</Heading>

- [モデレーション](/guides/moderation)
- [サブスクリプション](/guides/subscriptions)
- [ラベラーの作成](/guides/creating-a-labeler)
- [Ozoneの使用](/guides/using-ozone)
- [ラベル仕様](/specs/label)
